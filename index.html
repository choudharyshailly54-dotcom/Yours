<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chocolate Day | Tanush & Shailly üç´</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --autumn-orange: #d35400;
            --chocolate-brown: #3e2723;
            --warm-cream: #fff3e0;
            --burnt-blue: #2c3e50;
        }

        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            font-family: 'Playfair Display', serif;
            background: var(--warm-cream);
            overflow: hidden;
        }

        .page {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            box-sizing: border-box;
            border: 15px solid var(--burnt-blue);
            background: linear-gradient(135deg, #fceabb 0%, #f8b500 100%);
            animation: fadeIn 0.8s ease;
        }
        .active { display: flex; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Puzzle Styling */
        #puzzle-container {
            display: grid;
            grid-template-columns: repeat(3, 90px);
            grid-template-rows: repeat(4, 90px);
            gap: 4px;
            padding: 10px;
            background: var(--chocolate-brown);
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }
        .piece {
            width: 90px; height: 90px;
            background-image: url('10498.webp');
            background-size: 270px 360px;
            cursor: pointer;
            border-radius: 4px;
            transition: transform 0.2s, border 0.2s;
            border: 2px solid transparent;
        }
        .piece.selected { border: 2px solid white; transform: scale(1.05); z-index: 10; }

        /* Tarot Cards */
        .tarot-deck { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; width: 95%; }
        .tarot-card { width: 90px; height: 140px; perspective: 1000px; cursor: pointer; }
        .tarot-inner {
            position: relative; width: 100%; height: 100%;
            transition: transform 0.8s; transform-style: preserve-3d;
        }
        .tarot-card.flipped .tarot-inner { transform: rotateY(180deg); }
        .back, .front {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden; border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            padding: 8px; font-size: 11px; text-align: center;
        }
        .back {
            background: #1a2a3a;
            border: 3px solid #c5a059;
            color: #c5a059; font-weight: bold;
            background-image: radial-gradient(circle, #2c3e50 1px, transparent 1px);
            background-size: 10px 10px;
        }
        .front {
            background: #fffcf2; color: var(--chocolate-brown);
            transform: rotateY(180deg); border: 2px solid var(--autumn-orange);
            font-family: 'Dancing Script', cursive; font-size: 14px;
        }

        /* Banner */
        .banner {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.98); padding: 30px; border-radius: 20px;
            border: 4px solid var(--chocolate-brown); display: none;
            text-align: center; z-index: 200; box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* Envelope & Letter */
        .envelope {
            width: 200px; height: 150px; background: #c68642;
            position: relative; cursor: pointer; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;
        }
        .envelope::before {
            content: ''; position: absolute; top: 0; left: 0;
            border-left: 100px solid transparent; border-right: 100px solid transparent;
            border-top: 80px solid #a66d33; transition: 0.5s; z-index: 2;
        }
        .envelope.open::before { transform: rotateX(180deg); transform-origin: top; }
        #letter {
            width: 85%; max-height: 70vh; overflow-y: auto; background: white;
            padding: 25px; border-radius: 5px; font-family: 'Dancing Script', cursive;
            display: none; box-shadow: 0 10px 30px rgba(0,0,0,0.3); font-size: 18px;
        }

        .btn { background: var(--chocolate-brown); color: white; padding: 12px 25px; border: none; border-radius: 25px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body onclick="playMusic()">

    <audio id="bgMusic" loop><source src="music.mp3" type="audio/mpeg"></audio>

    <div id="p1" class="page active">
        <div style="background:white; padding:35px; border-radius:20px; border:3px solid var(--burnt-blue);">
            <h2 style="color:var(--chocolate-brown)">Tanush's Secret Portal</h2>
            <input type="text" id="u" placeholder="Username (Tanush.31)" style="margin-bottom:10px; padding:10px; width:200px;"><br>
            <input type="password" id="p" placeholder="Password (Bachha)" style="margin-bottom:15px; padding:10px; width:200px;"><br>
            <button class="btn" onclick="doLogin()">Unlock üß°</button>
        </div>
    </div>

    <div id="p2" class="page">
        <div style="width:60px; height:60px; border:8px solid #f3f3f3; border-top:8px solid var(--chocolate-brown); border-radius:50%; animation:spin 1s linear infinite;"></div>
        <h3 style="color:var(--chocolate-brown); margin-top:20px;">Mixing some sweetness...</h3>
    </div>

    <div id="p3" class="page">
        <h2 style="color:var(--chocolate-brown)">Fix the F1 Memory üß©</h2>
        <p style="font-size: 14px;">Click two pieces to swap them!</p>
        <div id="puzzle-container"></div>
        
        <div id="puzzle-banner" class="banner">
            <h2 style="color:var(--chocolate-brown)">Happy Chocolate Day Love üíï</h2>
            <img src="10500.webp" style="width:220px; border-radius:10px;">
            <p>You did it, Bachha!</p>
            <button onclick="nextPage(4)" class="btn">Next Step üëâ</button>
        </div>
    </div>

    <div id="p4" class="page">
        <h2 style="color:var(--chocolate-brown)">Love Tarot Reading üïØÔ∏è</h2>
        <div class="tarot-deck" id="deck"></div>
        <button onclick="nextPage(5)" class="btn" style="margin-top:20px;">Read My Message ‚úâÔ∏è</button>
    </div>

    <div id="p5" class="page">
        <div id="envWrap" onclick="openLetter()" class="envelope"></div>
        <div id="letter">
            <strong>To Tanush,</strong><br><br>
            They say chocolate is the language of love, but I think our language is a little more complicated‚Äîand a lot sweeter. <br><br>
            We started talking on December 11th with a "fake dating" contract. By the 13th, the "fake" part was already melting away. You remembered every tiny detail I mentioned. <br><br>
            December 14th, 2:39 AM... Two voice notes of you singing. That was the exact moment I realized I had failed the mission. Our relationship shifted from that crunchy KitKat phase into something deep and smooth like Dairy Milk Silk. <br><br>
            Happy Chocolate Day to my favorite "failed" mission. You‚Äôre the KitKat that makes me laugh and the Silk that softens my world.<br><br>
            <strong>Forever your "Bold Proposor,"<br>Shailly</strong>
        </div>
    </div>

    <script>
        function playMusic() { document.getElementById('bgMusic').play(); }

        function doLogin() {
            if(document.getElementById('u').value === "Tanush.31" && document.getElementById('p').value === "Bachha") {
                nextPage(2);
                setTimeout(() => { nextPage(3); initPuzzle(); }, 3000);
            } else { alert("Try again, Bachha! ‚ù§Ô∏è"); }
        }

        function nextPage(n) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('p' + n).classList.add('active');
        }

        // SWAPPABLE PUZZLE LOGIC
        let firstPiece = null;
        const correctOrder = Array.from({length: 12}, (_, i) => i);
        let currentOrder = [...correctOrder].sort(() => Math.random() - 0.5);

        function initPuzzle() {
            const container = document.getElementById('puzzle-container');
            container.innerHTML = '';
            currentOrder.forEach((pos, index) => {
                const div = document.createElement('div');
                div.className = 'piece';
                div.style.backgroundPosition = `${-(pos % 3) * 90}px ${-Math.floor(pos / 3) * 90}px`;
                div.dataset.index = index;
                div.onclick = () => handleSwap(div);
                container.appendChild(div);
            });
        }

        function handleSwap(el) {
            if (!firstPiece) {
                firstPiece = el;
                el.classList.add('selected');
            } else {
                const idx1 = firstPiece.dataset.index;
                const idx2 = el.dataset.index;
                
                // Swap in array
                [currentOrder[idx1], currentOrder[idx2]] = [currentOrder[idx2], currentOrder[idx1]];
                
                firstPiece.classList.remove('selected');
                firstPiece = null;
                initPuzzle();
                checkWin();
            }
        }

        function checkWin() {
            if (JSON.stringify(currentOrder) === JSON.stringify(correctOrder)) {
                document.getElementById('puzzle-banner').style.display = 'block';
            }
        }

        const tarotData = [
            "Oh! Sorry but you are now captured in my heart.",
            "So... You choose to click again to know more, hmm? Here it is: The person you want to be with, will be always yours.",
            "Your all wishes will come true if your Love is pure.",
            "Oh, here's a warm warning: Never hesitate to tell your feelings to your loved one.",
            "Oops, silly you should studyyyy!!!",
            "Anyways, I Loveeeeee Youuuuuu Soooo Muchhhh üéÄ."
        ];

        tarotData.forEach(text => {
            const card = document.createElement('div');
            card.className = 'tarot-card';
            card.innerHTML = `<div class="tarot-inner"><div class="back">Tarot</div><div class="front">${text}</div></div>`;
            card.onclick = () => card.classList.toggle('flipped');
            document.getElementById('deck').appendChild(card);
        });

        function openLetter() {
            document.getElementById('envWrap').classList.add('open');
            setTimeout(() => {
                document.getElementById('envWrap').style.display = 'none';
                document.getElementById('letter').style.display = 'block';
            }, 600);
        }
    </script>
</body>
</html>
